@model Web.eBado.Models.Shared.AttachmentGalleryModel
@using Web.eBado.Helpers
@using Web.eBado.Models.Shared
@{
    ViewBag.Title = "EditAccountGallery";
}

@Styles.Render("~/Content/settings")
@Styles.Render("~/Content/jQuery-File-Upload")

<script>
    var $form = null;
    $(function () {

        $form = $('#fileupload').fileupload({
            dataType: 'json',
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i
        });
    });

    $('#fileupload').addClass('fileupload-processing');

    $.ajax({
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        url: '/FileUpload/GetFileList',
        success: function (data) {


            $('#fileupload').fileupload('option', 'done').call($('#fileupload'), $.Event('done'), { result: { files: data.files } })
            $('#fileupload').removeClass('fileupload-processing');
        }
    });
</script>


@Html.AntiForgeryToken()
<div class="container">
    <div class="resp push_top_10">
        @AccountHelper.SettingsMenu(Url, ViewContext.RouteData.Values["Action"].ToString())
        <div class="tabcontent-gallery push_top_10">
            <div style="float:left; margin-bottom: 50px; width:100%">
                <button type="submit" class="form-btn col-lg-2" style="float:left" onclick="location.href='@Url.Action("AccountGallery", "Account", new { batchId = @Model.Guid })'">Naspat</button>
            </div>
            <div class="col-lg-10">
                <h2>@Model.Name</h2>
                <h4>@Model.Description</h4>
            </div>
            @Html.Partial("_Files")
            <div class="push_top_20">
                <div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls" data-filter=":even">
                    <div class="slides"></div>
                    <h3 class="title"></h3>
                    <a class="prev">‹</a>
                    <a class="next">›</a>
                    <a class="close">×</a>
                    <a class="play-pause"></a>
                    <ol class="indicator"></ol>
                </div>
                <div id="links" style="float:left; width:100%">
                    @if (@Model.Attachments != null && @Model.Attachments.Count != 0)
                    {
                        foreach (AttachmentModel file in @Model.Attachments)
                        {

                            @*if (file.type.Equals("video/mp4"))
    {

        <a href="@file.url" title="@file.name" type="video/mp4"><img src="@file.thumbnailUrl" alt="@file.name"></a>


    }
    else
    {*@
                            <div class="thumb"><a href="@file.Url" title="@file.Name"><img src="@file.ThumbnailUrl" alt="@file.Name"></a></div>
                            //}

                        }
                    }
                    else
                    {
                        <p>No files</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/jQuery-File-Upload")
<script>
    document.getElementById('links').onclick = function (event) {
        event = event || window.event;
        var target = event.target || event.srcElement,
            link = target.src ? target.parentNode : target,
            options = { index: link, event: event },
            links = this.getElementsByTagName('a');
        blueimp.Gallery(links, options);
    };
</script>

@Scripts.Render("~/bundles/Blueimp-Gallerry2")

